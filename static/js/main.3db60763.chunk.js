(window.webpackJsonppoint_game=window.webpackJsonppoint_game||[]).push([[0],{120:function(e,t,r){e.exports=r(202)},126:function(e,t,r){},185:function(e,t,r){},190:function(e,t,r){},191:function(e,t,r){},202:function(e,t,r){"use strict";r.r(t);var a=r(1),n=r.n(a),o=r(7),s=r.n(o),c=r(19),l=(r(125),r(55)),i=r(33),u=r(63),m=r(64),p=r(116),d=r(108),h=r(117),f=r(205),y=r(207),S=r(206),g=r(72),v=(r(126),f.a.Option),b=r(67),G=Object(c.b)("Store")(Object(c.c)(function(e){function t(e){var r;return Object(u.a)(this,t),(r=Object(p.a)(this,Object(d.a)(t).call(this,e))).createGrid=function(e){for(var t=[],r=0;r<+e;r++){t[r]=[];for(var a=0;a<+e;a++)t[r][a]={classColor:"",id:"".concat(r,"/").concat(a)}}return t},r.randomSort=function(){for(var e,t,a=Object(i.a)(r.props.Store.grid),n=(e=[]).concat.apply(e,Object(i.a)(a)),o=n.length-1;o>0;o--){t=Math.floor(Math.random()*(o+1));var s=[n[o],n[t]];n[t]=s[0],n[o]=s[1]}return n},r.handleChange=function(e){clearInterval(r.intervalGame),r.props.Store.setChoosenModeGame(r.props.Store.modeGames[e]),r.props.Store.setIsPlay(!1),r.props.Store.setPlayerWinner(""),r.props.Store.setCount(0),r.props.Store.setGameScore({computer:0,player:0,countForWin:0}),r.props.Store.setGrid(r.createGrid(r.props.Store.modeGames[e].field))},r.handleChangeName=function(e){r.props.Store.setPlayerName(e.target.value)},r.gameEnd=function(e){clearInterval(r.intervalGame),r.props.Store.setIsPlay(!1),r.props.Store.setGameScore({player:0,computer:0,countForWin:0}),r.props.Store.setCount(0),r.props.Store.setPlayerWinner(e),r.props.Store.sendWinningPlayer({winner:e,date:b().format("H:mm; DD MMMM YYYY")}),r.props.Store.getWinners()},r.checkerCell=function(){var e=r.props.Store.count,t=Object(i.a)(r.props.Store.grid),a=Object(i.a)(r.state.arr),n=JSON.parse(JSON.stringify(r.props.Store.gameScore));if(0===e){var o=a[e].id.split("/"),s=Object(l.a)(o,2),c=s[0],u=s[1];t[c][u].classColor="blue-cell",e+=1}else if(e===a.length){var m=a[e-1].id.split("/"),p=Object(l.a)(m,2),d=p[0],h=p[1];if("blue-cell"===t[d][h].classColor?(t[d][h].classColor="red-cell",n.computer=n.computer+1):n.player=n.player+1,n.player===n.countForWin)return r.gameEnd(r.props.Store.playerName),null;if(n.computer===n.countForWin)return r.gameEnd("Computer"),null}else{var f=a[e-1].id.split("/"),y=Object(l.a)(f,2),S=y[0],g=y[1],v=a[e].id.split("/"),b=Object(l.a)(v,2),G=b[0],O=b[1];if("blue-cell"===t[S][g].classColor?(t[S][g].classColor="red-cell",n.computer=n.computer+1):n.player=n.player+1,n.player===n.countForWin)return r.gameEnd(r.props.Store.playerName),null;if(n.computer===n.countForWin)return r.gameEnd("Computer"),null;t[G][O].classColor="blue-cell",e+=1}r.props.Store.setCount(e),r.props.Store.setGrid(t),r.props.Store.setGameScore(n)},r.handlePlayGame=function(){if(!r.props.Store.isPlay&&Object.entries(r.props.Store.choosenModeGame).length)if(""===r.props.Store.playerName)y.a.error("enter your name!");else{clearInterval(r.intervalGame),r.props.Store.setPlayerWinner("");var e=r.props.Store.gameScore,t=r.props.Store.choosenModeGame.field;r.props.Store.setGrid(r.createGrid(t)),e.countForWin=Math.floor(t*t/2)+1,r.props.Store.setGameScore(e),r.props.Store.setIsPlay(!0),r.intervalGame=setInterval(r.checkerCell,r.props.Store.choosenModeGame.delay),r.setState({firstGames:!0,arr:r.randomSort()})}else y.a.error("pick game mode or game is plaing")},r.state={firstGames:!1,arr:[]},r.intervalGame=null,r}return Object(h.a)(t,e),Object(m.a)(t,[{key:"render",value:function(){return n.a.createElement("div",{className:"header-container"},this.props.Store.gameSettings.length?n.a.createElement("div",{className:"pick-game-mod-select"},n.a.createElement(f.a,{style:{width:200},onChange:this.handleChange,defaultValue:"Pick game mode"},this.props.Store.gameSettings.map((function(e){return n.a.createElement(v,{key:e[0],value:e[0]},e[0])})))):n.a.createElement("div",null," load... "),n.a.createElement("div",{className:"enter-name-input"},n.a.createElement(S.a,{placeholder:"Enter your name",onChange:this.handleChangeName})),n.a.createElement("div",{className:"play-button"},n.a.createElement(g.a,{type:"primary",onClick:this.handlePlayGame},this.state.firstGames&&!this.props.Store.isPlay?"PLAY AGAIN":"PLAY")))}}]),t}(n.a.Component))),O=r(47),E=r(23),j=(r(185),Object(c.b)("Store")(Object(c.c)((function(e){return n.a.createElement("div",{className:"grid-container"},Object.keys(e.Store.grid).length?n.a.createElement("div",{className:"grid-div"},e.Store.grid.map((function(t,r){return n.a.createElement(O.a,{type:"flex",justufy:"center",key:r},t.map((function(t,a){return n.a.createElement(E.a,{key:a,className:"cell-in-row ".concat(t.classColor),onClick:function(){return function(t,r){if(e.Store.isPlay){var a=e.Store.grid;"blue-cell"===a[t][r].classColor&&(a[t][r].classColor="green-cell",e.Store.setGrid(a))}}(r,a)}})})))}))):n.a.createElement("div",null,"Please pick game mode"))})))),N=(r(190),r(203)),k=(r(191),{width:"100%",textAlign:"center"}),C=Object(c.b)("Store")(Object(c.c)((function(e){return Object(a.useEffect)((function(){e.Store.getWinners()}),[e.Store.leaderBoards]),n.a.createElement("div",{className:"leader-board-container"},n.a.createElement(N.a,{title:"Leader board"},0===e.Store.leaderBoards.length?n.a.createElement(N.a.Grid,{style:k}," NO DATA "):e.Store.leaderBoards.slice().reverse().map((function(e,t){return n.a.createElement(N.a.Grid,{key:t,style:k},"".concat(e.winner," - ").concat(e.date))}))))}))),P=r(204),W=P.a.Title,w=Object(c.b)("Store")(Object(c.c)((function(e){return n.a.createElement("div",{style:{textAlign:"center",marginTop:"1rem"}},""===e.Store.playerWinner?"":n.a.createElement(W,null,"".concat(e.Store.playerWinner," won")))}))),M=P.a.Title,I=function(e){return n.a.createElement("div",{className:"main-container"},n.a.createElement("div",{className:"mainTitle"},n.a.createElement(M,null,"Game In Dots")),n.a.createElement("div",{className:"container-content"},n.a.createElement("div",null,n.a.createElement(G,null),n.a.createElement(w,null),n.a.createElement(j,null)),n.a.createElement(C,null)))},J=r(39),T=r.n(J),A=r(71),F=r(9),x=function(){function e(){Object(u.a)(this,e),this.modeGames={},this.choosenModeGame={},this.isPlay=!1,this.playerName="",this.url="http://starnavi-frontend-test-task.herokuapp.com/",this.gameSettings=[],this.grid=[],this.count=0,this.gameScore={player:0,computer:0,countForWin:0},this.playerWinner="",this.leaderBoards=[]}return Object(m.a)(e,[{key:"setPlayerWinner",value:function(e){this.playerWinner=e}},{key:"setGameScore",value:function(e){this.gameScore=JSON.parse(JSON.stringify(e))}},{key:"setCount",value:function(e){this.count=e}},{key:"setModeGames",value:function(e){this.modeGames=JSON.parse(JSON.stringify(e))}},{key:"setIsPlay",value:function(e){this.isPlay=e}},{key:"setPlayerName",value:function(e){this.playerName=e}},{key:"setChoosenModeGame",value:function(e){this.choosenModeGame=JSON.parse(JSON.stringify(e))}},{key:"setGrid",value:function(e){this.grid=Object(i.a)(e)}},{key:"getGameSetings",value:function(){var e=Object(A.a)(T.a.mark((function e(){var t=this;return T.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",fetch("".concat(this.url,"game-settings"),{method:"GET"}).then((function(e){return e.json()})).then((function(e){t.gameSettings=Object.entries(e),t.modeGames=e})));case 1:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"getWinners",value:function(){var e=Object(A.a)(T.a.mark((function e(){var t=this;return T.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",fetch("".concat(this.url,"winners"),{method:"GET"}).then((function(e){return e.json()})).then((function(e){return t.leaderBoards=Object(i.a)(e)})));case 1:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"sendWinningPlayer",value:function(){var e=Object(A.a)(T.a.mark((function e(t){return T.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:fetch("".concat(this.url,"winners"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(t)}).then((function(e){return e.json()})).catch((function(e){return console.error("\u041e\u0448\u0438\u0431\u043a\u0430:",e)}));case 1:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()}]),e}();Object(F.h)(x,{leaderBoards:F.m,modeGames:F.m,isPlay:F.m,playerName:F.m,gameSettings:F.m,choosenModeGame:F.m,grid:F.m,count:F.m,gameScore:F.m,playerWinner:F.m,setPlayerWinner:F.d,setGameScore:F.d,setCount:F.d,setIsPlay:F.d,setModeGames:F.d,setPlayerName:F.d,setChoosenModeGame:F.d,setGrid:F.d});var B=new x;B.getGameSetings();var Y={Store:B};s.a.render(n.a.createElement(c.a,Y,n.a.createElement(I,null)),document.getElementById("root"))}},[[120,1,2]]]);
//# sourceMappingURL=main.3db60763.chunk.js.map